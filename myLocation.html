<!DOCTYPE html>
 2<html>
 3  <head>
 4    <title>Geolocation Marker Example Usage</title>
 5    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
 6    <meta charset="utf-8">
 7    <style>
 8      html, body, #map_canvas {
 9        margin: 0;
10        padding: 0;
11        height: 100%;
12      }
13    </style>
14    <script src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>
15    <script src="//google-maps-utility-library-v3.googlecode.com/svn/trunk/geolocationmarker/src/geolocationmarker-compiled.js"></script>
16    <script>
17      var map, GeoMarker;
18
19      function initialize() {
20        var mapOptions = {
21          zoom: 17,
22          center: new google.maps.LatLng(-34.397, 150.644),
23          mapTypeId: google.maps.MapTypeId.ROADMAP
24        };
25        map = new google.maps.Map(document.getElementById('map_canvas'),
26            mapOptions);
27
28        GeoMarker = new GeolocationMarker();
29        GeoMarker.setCircleOptions({fillColor: '#808080'});
30
31        google.maps.event.addListenerOnce(GeoMarker, 'position_changed', function() {
32          map.setCenter(this.getPosition());
33          map.fitBounds(this.getBounds());
34        });
35
36        google.maps.event.addListener(GeoMarker, 'geolocation_error', function(e) {
37          alert('There was an error obtaining your position. Message: ' + e.message);
38        });
39
40        GeoMarker.setMap(map);
41      }
42
43      google.maps.event.addDomListener(window, 'load', initialize);
44
45      if(!navigator.geolocation) {
46        alert('Your browser does not support geolocation');
47      }
48    </script>
49  </head>
50  <body>
51    <div id="map_canvas"></div>
52  </body>
53</html>